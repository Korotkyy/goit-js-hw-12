{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\ngallery.style.display = 'grid';\ngallery.style.gridTemplateColumns = 'repeat(auto-fill, minmax(300px, 1fr))';\ngallery.style.gap = '16px';\ngallery.style.padding = '16px';\n\nexport function displayImages(images,currentPage) {\n\n    if (!Array.isArray(images)) {\n        iziToast.error({\n            title: 'Error',\n            message: 'displayImages expects an array but received:' + typeof images,\n        \n        });\n\n        return;\n    }\n    const imageResults = document.getElementById('imageResults');\n    if (currentPage === 1) {\n        imageResults.innerHTML = '';\n    }\n   \n\n    images.forEach(image => {\n        const imgElement = document.createElement('a');\n        imgElement.classList.add('image-card');\n        imgElement.href = image.largeImageURL;\n        imgElement.innerHTML = `\n            \n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n            \n            <div class=\"info\">\n                <p><b>Likes:</b> ${image.likes}</p>\n                <p><b>Views:</b> ${image.views}</p>\n                <p><b>Comments:</b> ${image.comments}</p>\n                <p><b>Downloads:</b> ${image.downloads}</p>\n            </div>`;\n        imageResults.appendChild(imgElement);\n\n           \n        const cardStyle = imgElement;\n        cardStyle.style.position = 'relative';\n        cardStyle.style.overflow = 'hidden';\n        cardStyle.style.borderRadius = '8px';\n        cardStyle.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.1)';\n\n        const cardInfo = imgElement.querySelector('.info');\n        cardInfo.style.position = 'absolute';\n        cardInfo.style.bottom = '0';\n        cardInfo.style.left = '0';\n        cardInfo.style.right = '0';\n        cardInfo.style.padding = '8px';\n        cardInfo.style.background = 'rgba(0, 0, 0, 0.6)';\n        cardInfo.style.color = '#fff';\n        cardInfo.style.fontSize = '14px';\n    });\n    \n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n   \n}\n\nexport function clearImages() {\n    const imageResults = document.getElementById('imageResults');\n    imageResults.innerHTML = '';\n}\n\n\n\n\n\n\n\n\n","import iziToast from  \"izitoast\" ;\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { displayImages, clearImages } from \"./render-functions\";\nimport axios from \"axios\";\n\nconst loader = document.querySelector('.loader');\nfunction showLoader() {\n    loader.classList.remove('hidden') \n   \n}\n\nfunction hideLoader() {\n    loader.classList.add('hidden') \n    \n}\nconst apiKey = '44406774-b6929e0ee65f9835201f12742';\n\n\nexport default async function getImages(userInput, currentPage = 1, showLoadMore, hideLoadMore, showEndMessage) {\n    const BASE_URL = 'https://pixabay.com/';\n    const END_POINT = 'api/';\n    const params = new URLSearchParams({\n        key: apiKey,\n        q: userInput,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: currentPage,\n\n    });\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n    \n    \n    try {\n        showLoader();\n        const response = await axios.get(url);\n        const data = response.data;\n            \n        if (data.hits.length === 0) {\n             if (currentPage === 1) {\n                clearImages();\n            }\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            hideLoadMore();\n        } else {\n            displayImages(data.hits, currentPage);\n            if (data.totalHits > currentPage * 15) {\n                showLoadMore(); \n            } else {\n                hideLoadMore(); \n                showEndMessage();\n            }\n        }\n    \n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again!',\n        });\n        hideLoadMore();\n    } finally {\n        hideLoader();\n        \n    }\n        \n}\n\n\n\n","import getImages from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\n\nlet currentPage = 1;\nlet userInput = '';\n\nconst searchForm = document.querySelector('form');\nconst searchInput = document.querySelector('input');\nconst searchButton = document.querySelector('button[type=submit]');\nconst loadMoreBtn = document.querySelector('button[type=button]');\n\n\nconst style = document.createElement('style');\nstyle.innerHTML = `\n.hidden {\n    display: none;\n}\n`;\ndocument.head.appendChild(style);\n\nfunction showLoadMore() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n    loadMoreBtn.classList.add('hidden');\n    console.log('Кнопка схована:', loadMoreBtn.classList.contains('hidden'));\n}\n\nfunction showEndMessage() {\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n    });\n}\n\nfunction scrollToNewImages() {\n    const imgElement = document.querySelector('.image-card');\n    if (imgElement) {\n        const cardHeight = imgElement.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}\n\n\n    hideLoadMore();\n\n    searchForm.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        userInput = searchInput.value.trim();\n        if (userInput === '') {\n            hideLoadMore();\n            iziToast.error({\n                title: 'Error',\n                message: 'Поле пошуку не може бути порожнім',\n            });\n        \n        } else {\n            currentPage = 1;\n            hideLoadMore();\n            try {\n                await getImages(userInput, currentPage, showLoadMore, hideLoadMore, showEndMessage);\n                searchInput.value = '';\n            } catch (error) {\n                    iziToast.error({\n                        title: 'Error',\n                        message: 'An error occurred while fetching images. Please try again!',\n                    });\n                    console.error('Error fetching images:', error);\n            }\n        }\n    });\n    \n     loadMoreBtn.addEventListener('click', async () => {\n        currentPage++;\n        try {\n            await getImages(userInput, currentPage, showLoadMore, hideLoadMore, showEndMessage);\n            scrollToNewImages();\n        } catch (error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching more images. Please try again!',\n            });\n            console.error('Error fetching more images:', error);\n           \n        }\n    });"],"names":["gallery","displayImages","images","currentPage","iziToast","imageResults","image","imgElement","cardStyle","cardInfo","SimpleLightbox","clearImages","loader","showLoader","hideLoader","apiKey","getImages","userInput","showLoadMore","hideLoadMore","showEndMessage","BASE_URL","END_POINT","params","url","data","axios","searchForm","searchInput","loadMoreBtn","style","scrollToNewImages","cardHeight","event","error"],"mappings":"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"}